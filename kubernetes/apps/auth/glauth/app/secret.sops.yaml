apiVersion: v1
kind: Secret
metadata:
  name: glauth
# Create passbcrypt:
#   "https://gchq.github.io/CyberChef/#recipe=Bcrypt(12)To_Hex('None',0)"
# or
#   htpasswd -bnBC 10 "" YOUR_PASSWORD | tr -d ':\n' | od -A n -t x1 | sed 's/ *//g' | tr -d '\n'
stringData:
  server.toml: |
    debug = true
    [api]
      enabled = true
      tls = false
      listen = "0.0.0.0:5555"
    [ldap]
      enabled = true
      listen = "0.0.0.0:389"
    [ldaps]
      enabled = false
    [backend]
      datastore = "config"
      baseDN = "dc=home,dc=arpa"
  groups.toml: |
    [[groups]]
      name = "svcaccts"
      gidnumber = 6500
    [[groups]]
      name = "admins"
      gidnumber = 6501
    [[groups]]
      name = "people"
      gidnumber = 6502
  users.toml: |
    [[users]]
      name = "search"
      uidnumber = 5000
      primarygroup = 6500
      passbcrypt = "243261243132245273464b4f334264547a51756a424a46575773482e2e44514d4558586463365471744d654d6d30466e32777a6f474c4a5267754869"
      [[users.capabilities]]
        action = "search"
        object = "*"
    [[users]]
      name = "alex"
      mail = "alex@waibel.us"
      givenname = "Alex"
      sn = "Waibel"
      uidnumber = 5001
      primarygroup = 6502
      othergroups = [ 6501 ]
      passbcrypt = "24326124313224366266735548656c44723049747030374d524e6e2e75367436323464744f635a2f6d36704779536f5555736735486448526a363243"
